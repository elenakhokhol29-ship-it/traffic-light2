<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üö¶ Ampel des Wissens</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a3a6c, #2c3e50, #1a3a6c);
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 10% 20%, rgba(255,215,0,0.1) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(74,144,226,0.1) 0%, transparent 20%);
      z-index: -1;
    }

    .container {
      text-align: center;
      max-width: 900px;
      width: 100%;
      background: rgba(0, 20, 50, 0.85);
      border-radius: 30px;
      padding: 40px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7),
                  0 0 30px rgba(255, 215, 0, 0.2);
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    .header {
      margin-bottom: 30px;
    }

    .title {
      font-size: 3.2rem;
      font-weight: bold;
      background: linear-gradient(to right, #ffd700, #4a90e2, #ffd700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      margin-bottom: 10px;
      letter-spacing: 2px;
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5),
                     0 0 20px rgba(255, 215, 0, 0.3);
      }
      to {
        text-shadow: 0 0 20px rgba(255, 215, 0, 0.8),
                     0 0 30px rgba(255, 215, 0, 0.5),
                     0 0 40px rgba(74, 144, 226, 0.5);
      }
    }

    .subtitle {
      font-size: 1.6rem;
      color: #a0c8f0;
      margin-top: 8px;
      font-style: italic;
    }

    .german-flag {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin: 15px 0;
    }

    .flag-stripe {
      width: 30px;
      height: 10px;
      border-radius: 5px;
    }

    .flag-black { background: #000000; }
    .flag-red { background: #DD0000; }
    .flag-gold { background: #FFCE00; }

    .ampel-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 30px 0;
      position: relative;
    }

    .ampel {
      background: linear-gradient(to right, #333, #444, #333);
      width: 220px;
      height: 500px;
      border-radius: 40px;
      padding: 30px 0;
      box-shadow: 
        0 15px 40px rgba(0, 0, 0, 0.8),
        0 0 30px rgba(255, 255, 255, 0.2),
        inset 0 0 20px rgba(0, 0, 0, 0.5);
      position: relative;
      border: 4px solid #222;
      overflow: hidden;
    }

    .ampel::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.1) 100%
      );
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }

    @keyframes shine {
      0%, 100% { transform: rotate(45deg) translateX(-100%); }
      50% { transform: rotate(45deg) translateX(100%); }
    }

    .lamp {
      width: 160px;
      height: 130px;
      border-radius: 50%;
      margin: 20px auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 
        inset 0 -15px 30px rgba(0, 0, 0, 0.6),
        0 5px 15px rgba(0, 0, 0, 0.4);
      position: relative;
      overflow: hidden;
      border: 3px solid rgba(255, 255, 255, 0.3);
    }

    .lamp::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(
        circle,
        rgba(255, 255, 255, 0.4) 0%,
        rgba(255, 255, 255, 0) 70%
      );
      opacity: 0;
      transition: opacity 0.3s;
    }

    .lamp:hover::before {
      opacity: 1;
    }

    .lamp:hover {
      transform: scale(1.08) translateY(-5px);
      box-shadow: 
        inset 0 -10px 25px rgba(0, 0, 0, 0.4),
        0 8px 25px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(255, 255, 255, 0.5);
    }

    .lamp:active {
      transform: scale(0.95);
    }

    .rot {
      background: linear-gradient(135deg, #cc0000, #ff3333);
      color: #ff9999;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .rot.active {
      box-shadow: 
        0 0 50px #ff3333,
        0 0 80px #ff6666,
        inset 0 -10px 30px rgba(0, 0, 0, 0.5);
      color: white;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      animation: pulse-red 1s ease-in-out infinite;
    }

    @keyframes pulse-red {
      0%, 100% { box-shadow: 0 0 50px #ff3333, 0 0 80px #ff6666; }
      50% { box-shadow: 0 0 70px #ff5555, 0 0 100px #ff8888; }
    }

    .gelb {
      background: linear-gradient(135deg, #ffcc00, #ffde59);
      color: #ffd966;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .gelb.active {
      box-shadow: 
        0 0 50px #ffde59,
        0 0 80px #ffff99,
        inset 0 -10px 30px rgba(0, 0, 0, 0.5);
      color: #333;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      animation: pulse-yellow 1s ease-in-out infinite;
    }

    @keyframes pulse-yellow {
      0%, 100% { box-shadow: 0 0 50px #ffde59, 0 0 80px #ffff99; }
      50% { box-shadow: 0 0 70px #ffef79, 0 0 100px #ffffcc; }
    }

    .gruen {
      background: linear-gradient(135deg, #22cc22, #4dff4d);
      color: #66ff66;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .gruen.active {
      box-shadow: 
        0 0 50px #4dff4d,
        0 0 80px #88ff88,
        inset 0 -10px 30px rgba(0, 0, 0, 0.5);
      color: white;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      animation: pulse-green 1s ease-in-out infinite;
    }

    @keyframes pulse-green {
      0%, 100% { box-shadow: 0 0 50px #4dff4d, 0 0 80px #88ff88; }
      50% { box-shadow: 0 0 70px #6dff6d, 0 0 100px #aaffaa; }
    }

    .lamp-text {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 8px;
      letter-spacing: 1px;
    }

    .lamp-phrase {
      font-size: 0.95rem;
      font-style: italic;
      margin-top: 5px;
      text-align: center;
      line-height: 1.3;
    }

    .phrase-box {
      background: linear-gradient(to right, rgba(0, 30, 60, 0.9), rgba(0, 50, 100, 0.9));
      border-left: 6px solid #ffd700;
      border-right: 6px solid #ffd700;
      padding: 25px;
      border-radius: 15px;
      margin: 30px 0;
      max-width: 700px;
      text-align: center;
      font-size: 1.7rem;
      line-height: 1.6;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(255, 215, 0, 0.3);
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.5s ease;
    }

    .phrase-highlight {
      color: #ffd700;
      font-weight: bold;
      font-size: 1.2em;
    }

    .stats-container {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin: 30px 0;
      gap: 15px;
      flex-wrap: wrap;
    }

    .stat-box {
      background: rgba(0, 40, 80, 0.85);
      border-radius: 25px;
      padding: 25px 20px;
      min-width: 150px;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.5),
        0 0 15px rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.5s;
    }

    .stat-box:hover::before {
      transform: translateX(100%);
    }

    .stat-box:hover {
      transform: translateY(-8px);
      box-shadow: 
        0 12px 30px rgba(0, 0, 0, 0.7),
        0 0 25px rgba(255, 255, 255, 0.2);
    }

    .stat-box.rot-box:hover { border-color: #ff3333; }
    .stat-box.gelb-box:hover { border-color: #ffde59; }
    .stat-box.gruen-box:hover { border-color: #4dff4d; }

    .stat-label {
      font-size: 1.1rem;
      margin-bottom: 10px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-number {
      font-size: 4rem;
      font-weight: bold;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
    }

    .rot-text { color: #ff5555; }
    .gelb-text { color: #ffde59; }
    .gruen-text { color: #4dff4d; }

    .stat-phrase {
      font-size: 0.95rem;
      font-style: italic;
      color: #a0c8f0;
      min-height: 40px;
    }

    .controls {
      display: flex;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn {
      background: linear-gradient(to bottom, #4a6fa5, #2c3e50);
      color: white;
      border: none;
      padding: 16px 40px;
      font-size: 1.3rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 
        0 6px 15px rgba(0, 0, 0, 0.5),
        0 0 10px rgba(0, 0, 0, 0.3);
      font-weight: bold;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-100%);
      transition: transform 0.5s;
    }

    .btn:hover::before {
      transform: translateX(100%);
    }

    .btn:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 10px 25px rgba(0, 0, 0, 0.7),
        0 0 20px rgba(255, 255, 255, 0.3);
    }

    .btn:active {
      transform: translateY(2px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }

    .btn-reset {
      background: linear-gradient(to bottom, #e74c3c, #c0392b);
      padding: 16px 35px;
    }

    .btn-reset:hover {
      background: linear-gradient(to bottom, #ff5252, #e74c3c);
      box-shadow: 
        0 10px 25px rgba(231, 76, 60, 0.6),
        0 0 20px rgba(255, 255, 255, 0.3);
    }

    .btn-show {
      background: linear-gradient(to bottom, #27ae60, #219653);
      padding: 16px 35px;
    }

    .btn-show:hover {
      background: linear-gradient(to bottom, #2ecc71, #27ae60);
      box-shadow: 
        0 10px 25px rgba(39, 174, 96, 0.6),
        0 0 20px rgba(255, 255, 255, 0.3);
    }

    .btn-teacher {
      background: linear-gradient(to bottom, #9b59b6, #8e44ad);
      padding: 16px 35px;
    }

    .btn-teacher:hover {
      background: linear-gradient(to bottom, #b67ae6, #9b59b6);
      box-shadow: 
        0 10px 25px rgba(142, 68, 173, 0.6),
        0 0 20px rgba(255, 255, 255, 0.3);
    }

    .road {
      width: 85%;
      max-width: 700px;
      height: 12px;
      background: linear-gradient(90deg, #555, #777, #888, #777, #555);
      border-radius: 6px;
      margin: 25px auto;
      position: relative;
      box-shadow: 
        0 4px 10px rgba(0, 0, 0, 0.5),
        inset 0 2px 5px rgba(255, 255, 255, 0.2);
    }

    .road::before {
      content: 'üá©üá™ Autobahn des Wissens üá©üá™';
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to right, #ffd700, #ffffff, #ffd700);
      color: #2c3e50;
      padding: 6px 25px;
      border-radius: 30px;
      font-weight: bold;
      font-size: 1.1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      letter-spacing: 1px;
      border: 2px solid #2c3e50;
    }

    .road::after {
      content: '';
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 60px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,50 Q40,20 50,50 T80,50 L80,70 Q50,80 20,70 Z" fill="%23333" stroke="%23555" stroke-width="3"/><circle cx="35" cy="45" r="5" fill="%23ff0"/><circle cx="65" cy="45" r="5" fill="%23ff0"/><rect x="45" y="60" width="10" height="5" fill="%23f00"/></svg>') center/contain no-repeat;
      animation: car-move 8s linear infinite;
    }

    @keyframes car-move {
      0% { transform: translateX(-50%) scale(0.8); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateX(calc(-50% + 700px)) scale(0.8); opacity: 0; }
    }

    .footer {
      margin-top: 35px;
      text-align: center;
      color: #a0c8f0;
      font-size: 1.05rem;
      max-width: 700px;
      line-height: 1.6;
      padding: 20px;
      border-top: 2px dashed rgba(255, 215, 0, 0.3);
    }

    .teacher-tip {
      background: rgba(0, 30, 60, 0.7);
      padding: 15px;
      border-radius: 15px;
      margin-top: 10px;
      font-style: italic;
      border-left: 4px solid #ffd700;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #ffd700;
      border-radius: 50%;
      animation: fall linear forwards;
    }

    @keyframes fall {
      to { transform: translateY(100vh) rotate(360deg); }
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .container {
      animation: fadeInUp 0.8s ease-out;
    }

    @media (max-width: 768px) {
      .container {
        padding: 25px 15px;
        margin: 10px;
      }
      
      .title { font-size: 2.3rem; }
      .subtitle { font-size: 1.2rem; }
      
      .ampel {
        width: 160px;
        height: 380px;
      }
      
      .lamp {
        width: 120px;
        height: 95px;
      }
      
      .lamp-text { font-size: 1.3rem; }
      .lamp-phrase { font-size: 0.75rem; }
      
      .stat-number { font-size: 3rem; }
      .phrase-box { font-size: 1.3rem; padding: 15px; }
      
      .btn { padding: 12px 25px; font-size: 1.1rem; }
      
      .road::before { font-size: 0.9rem; padding: 4px 15px; }
    }

    @media (max-width: 480px) {
      .title { font-size: 1.9rem; }
      .subtitle { font-size: 1rem; }
      
      .ampel {
        width: 140px;
        height: 340px;
      }
      
      .lamp {
        width: 100px;
        height: 80px;
      }
      
      .lamp-text { font-size: 1.1rem; }
      .lamp-phrase { font-size: 0.65rem; }
      
      .stat-number { font-size: 2.5rem; }
      .stat-label { font-size: 0.95rem; }
      .phrase-box { font-size: 1.1rem; }
      
      .controls { flex-direction: column; align-items: center; }
      .btn { width: 90%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">Ampel des Wissens</div>
      <div class="subtitle">Wie war die Stunde heute?</div>
      <div class="german-flag">
        <div class="flag-stripe flag-black"></div>
        <div class="flag-stripe flag-red"></div>
        <div class="flag-stripe flag-gold"></div>
      </div>
    </div>

    <div class="road"></div>

    <div class="ampel-container">
      <div class="ampel">
        <div class="lamp rot" id="rot" onclick="vote('rot')">
          <div class="lamp-text">ROT</div>
          <div class="lamp-phrase">Es war schwer</div>
        </div>
        <div class="lamp gelb" id="gelb" onclick="vote('gelb')">
          <div class="lamp-text">GELB</div>
          <div class="lamp-phrase">Ich schaffe es</div>
        </div>
        <div class="lamp gruen" id="gruen" onclick="vote('gruen')">
          <div class="lamp-text">GR√úN</div>
          <div class="lamp-phrase">Es war leicht</div>
        </div>
      </div>
    </div>

    <div class="phrase-box" id="phraseBox">
      Wie war die Stunde f√ºr dich? Klicke auf deine Ampelfarbe!
    </div>

    <div class="stats-container">
      <div class="stat-box rot-box">
        <div class="stat-label rot-text">üî¥ ROT</div>
        <div class="stat-number rot-text" id="countRot">0</div>
        <div class="stat-phrase">Es war schwer</div>
      </div>
      <div class="stat-box gelb-box">
        <div class="stat-label gelb-text">üü° GELB</div>
        <div class="stat-number gelb-text" id="countGelb">0</div>
        <div class="stat-phrase">Ich schaffe es</div>
      </div>
      <div class="stat-box gruen-box">
        <div class="stat-label gruen-text">üü¢ GR√úN</div>
        <div class="stat-number gruen-text" id="countGruen">0</div>
        <div class="stat-phrase">Es war leicht</div>
      </div>
    </div>

    <div class="controls">
      <button class="btn btn-reset" onclick="reset()">
        üîÑ Zur√ºcksetzen
      </button>
      <button class="btn btn-show" onclick="showResults()">
        üìä Ergebnisse
      </button>
      <button class="btn btn-teacher" onclick="teacherMode()">
        üë®‚Äçüè´ Lehrer-Modus
      </button>
    </div>

    <div class="footer">
      <p><strong>üá©üá™ Deutsche Weisheit:</strong> "√úbung macht den Meister!"</p>
      <div class="teacher-tip">
        üí° Tipp: Rote Ampel = ehrlich, Gelbe = mutig, Gr√ºne = gro√üartig! Jede Stimme z√§hlt!
      </div>
    </div>
  </div>

  <script>
    // –ó–≤—É–∫–∏ (–±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–µ–º Web Audio API)
    function playSound(type) {
      try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = type === 'rot' ? 200 : type === 'gelb' ? 400 : 600;
        oscillator.type = 'sine';
        
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.05);
        gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.3);
        
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.3);
      } catch (e) {
        console.log('Audio not supported or blocked');
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤
    let counts = {
      rot: 0,
      gelb: 0,
      gruen: 0
    };

    let teacherModeActive = false;

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    function updateUI() {
      document.getElementById('countRot').textContent = counts.rot;
      document.getElementById('countGelb').textContent = counts.gelb;
      document.getElementById('countGruen').textContent = counts.gruen;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function createConfetti(color) {
      const confettiCount = 30;
      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = color;
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.top = '-20px';
        confetti.style.width = (Math.random() * 8 + 5) + 'px';
        confetti.style.height = confetti.style.width;
        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
        document.body.appendChild(confetti);
        
        // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }

    // –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
    function vote(color) {
      if (teacherModeActive) {
        alert('üéì Lehrer-Modus aktiv! Klicke "Lehrer-Modus" aus, um abzustimmen.');
        return;
      }
      
      counts[color]++;
      updateUI();
      
      // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
      const lamp = document.getElementById(color);
      lamp.classList.add('active');
      
      // –ó–≤—É–∫
      playSound(color);
      
      // –ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è —Ñ—Ä–∞–∑–∞
      const phrases = {
        rot: [
          'Danke f√ºr deine Ehrlichkeit! üôè Zusammen schaffen wir das!',
          'Stau auf der Autobahn? Kein Problem ‚Äî wir bauen eine Br√ºcke! üåâ',
          'Ehrlichkeit ist der erste Schritt zum Erfolg! üí™',
          'ROT ist okay! Fehler helfen uns zu lernen! ‚ú®'
        ],
        gelb: [
          'Fast geschafft! Du bist auf der √úberholspur! üèÅ',
          'GELB = Mut! Du gibst nicht auf ‚Äî das ist toll! üåü',
          'Auf dem Weg zum Meister! Weiter so! üöÄ',
          'Ich schaffe es! ‚Äî Das ist die richtige Einstellung! üí™'
        ],
        gruen: [
          'Fantastisch! Du bist ein deutscher Meister! üèÜ',
          'GR√úN! Freie Fahrt auf der Autobahn des Wissens! üöóüí®',
          'Super! Das war ein Volltreffer! ‚öΩ',
          'Leicht? Dann bist du bereit f√ºr die n√§chste Herausforderung! üéØ'
        ]
      };
      
      const randomPhrase = phrases[color][Math.floor(Math.random() * phrases[color].length)];
      document.getElementById('phraseBox').innerHTML = randomPhrase;
      
      // –≠—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –∑–µ–ª—ë–Ω–æ–≥–æ
      if (color === 'gruen') {
        createConfetti('#4dff4d');
      }
      
      // –≠—Ñ—Ñ–µ–∫—Ç "–º–∏–≥–∞–Ω–∏—è" –¥–ª—è –≤—Å–µ—Ö –ª–∞–º–ø
      document.querySelectorAll('.lamp').forEach(l => {
        l.style.transform = 'scale(0.97)';
        setTimeout(() => { 
          l.style.transform = 'scale(1)';
          if (l === lamp) {
            setTimeout(() => {
              l.classList.remove('active');
            }, 800);
          }
        }, 100);
      });
    }

    // –°–±—Ä–æ—Å
    function reset() {
      if (!teacherModeActive) {
        if (!confirm('M√∂chtest du wirklich alle Stimmen zur√ºcksetzen?')) {
          return;
        }
      }
      
      counts = { rot: 0, gelb: 0, gruen: 0 };
      updateUI();
      document.getElementById('phraseBox').innerHTML = 'Wie war die Stunde f√ºr dich? Klicke auf deine Ampelfarbe!';
      
      // –≠—Ñ—Ñ–µ–∫—Ç "–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏"
      const ampel = document.querySelector('.ampel');
      ampel.style.transform = 'scale(0.95)';
      setTimeout(() => {
        ampel.style.transform = 'scale(1)';
      }, 300);
      
      document.querySelectorAll('.lamp').forEach(l => {
        l.classList.remove('active');
      });
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    function showResults() {
      const total = counts.rot + counts.gelb + counts.gruen;
      if (total === 0) {
        document.getElementById('phraseBox').innerHTML = '‚ö†Ô∏è Noch keine Stimmen! Wo sind die Fahrer? üöóüí®';
        return;
      }
      
      // –ü—Ä–æ—Ü–µ–Ω—Ç—ã
      const rotPct = Math.round((counts.rot / total) * 100);
      const gelbPct = Math.round((counts.gelb / total) * 100);
      const gruenPct = Math.round((counts.gruen / total) * 100);
      
      let resultText = `<strong>üìä Ergebnisse (${total} Stimmen):</strong><br><br>`;
      resultText += `üî¥ ROT: ${counts.rot} (${rotPct}%) ‚Äî Es war schwer<br>`;
      resultText += `üü° GELB: ${counts.gelb} (${gelbPct}%) ‚Äî Ich schaffe es<br>`;
      resultText += `üü¢ GR√úN: ${counts.gruen} (${gruenPct}%) ‚Äî Es war leicht<br><br>`;
      
      // –ê–Ω–∞–ª–∏–∑
      if (counts.gruen > counts.rot && counts.gruen > counts.gelb) {
        resultText += `<span style="color:#4dff4d; font-weight:bold">‚úÖ Die Klasse rockt! Die Autobahn ist frei!</span>`;
      } else if (counts.rot > counts.gelb && counts.rot > counts.gruen) {
        resultText += `<span style="color:#ff5555; font-weight:bold">üöß Vorsicht! Stau bei ROT. Zeit f√ºr Wiederholung!</span>`;
      } else {
        resultText += `<span style="color:#ffde59; font-weight:bold">‚ö†Ô∏è Gemischt! Die Klasse ist auf dem Weg ‚Äî weiter √ºben!</span>`;
      }
      
      document.getElementById('phraseBox').innerHTML = resultText;
      
      // –≠—Ñ—Ñ–µ–∫—Ç "–æ–≥–Ω–µ–π" –¥–ª—è –ø–æ–±–µ–¥–∏–≤—à–µ–≥–æ —Ü–≤–µ—Ç–∞
      const maxColor = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
      document.getElementById(maxColor).classList.add('active');
      setTimeout(() => {
        document.getElementById(maxColor).classList.remove('active');
      }, 2000);
    }

    // –†–µ–∂–∏–º —É—á–∏—Ç–µ–ª—è
    function teacherMode() {
      teacherModeActive = !teacherModeActive;
      
      const btn = event.target;
      if (teacherModeActive) {
        btn.innerHTML = 'üë®‚Äçüéì Sch√ºler-Modus';
        btn.style.background = 'linear-gradient(to bottom, #8e44ad, #6c3483)';
        document.getElementById('phraseBox').innerHTML = 
          '<span style="color:#ffd700">üéì LEHRER-MODUS AKTIV</span><br>Jetzt kannst du die Ampel steuern!<br>Klicke die Buttons, um f√ºr Sch√ºler abzustimmen.';
        
        // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        document.querySelectorAll('.lamp').forEach(lamp => {
          lamp.style.cursor = 'pointer';
          lamp.title = 'Klicken, um f√ºr einen Sch√ºler abzustimmen';
        });
      } else {
        btn.innerHTML = 'üë®‚Äçüè´ Lehrer-Modus';
        btn.style.background = 'linear-gradient(to bottom, #9b59b6, #8e44ad)';
        document.getElementById('phraseBox').innerHTML = 
          'Wie war die Stunde f√ºr dich? Klicke auf deine Ampelfarbe!';
      }
    }

    // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
    document.addEventListener('keydown', function(e) {
      if (e.key === 'r' || e.key === 'R' || e.key === '1') vote('rot');
      if (e.key === 'y' || e.key === 'Y' || e.key === 'g' || e.key === '2') vote('gelb');
      if ((e.key === 'g' && e.shiftKey) || e.key === 'G' || e.key === '3') vote('gruen');
      if (e.key === 'Escape') reset();
      if (e.key === 't' || e.key === 'T') teacherMode();
      if (e.key === 'e' || e.key === 'E') showResults();
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.onload = function() {
      updateUI();
      
      // –≠—Ñ—Ñ–µ–∫—Ç "–∑–∞–≥—Ä—É–∑–∫–∏" –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
      setTimeout(() => {
        document.querySelectorAll('.lamp').forEach((lamp, i) => {
          setTimeout(() => {
            lamp.style.opacity = '0.4';
            setTimeout(() => {
              lamp.style.opacity = '1';
              lamp.style.boxShadow = '0 0 30px ' + 
                (lamp.classList.contains('rot') ? '#ff3333' : 
                 lamp.classList.contains('gelb') ? '#ffde59' : '#4dff4d');
            }, 200);
          }, 400 * i);
        });
      }, 500);
    };
  </script>
</body>
</html>
